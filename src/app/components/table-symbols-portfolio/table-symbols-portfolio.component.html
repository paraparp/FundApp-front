<mat-form-field>
  <mat-label>Find</mat-label>
  <input matInput (keyup)="applyFilter($event)" placeholder="...">
</mat-form-field>


<table *ngIf="portfolioSymbs" mat-table matSort [dataSource]="dataSource" class="mat-elevation-z8">


  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header="symbol.name"> Name </th>
    <td mat-cell *matCellDef="let s">
      <div class="mediumbold left"> {{s.symbol.name}}</div>
      <div class="subline left">{{s.symbol.isin}} - {{s.symbol.category}} </div>

    </td>
    <td class="centered" mat-footer-cell *matFooterCellDef> TOTAL</td>
  </ng-container>

  <ng-container matColumnDef="representation">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Represent </th>
    <td class="percentage" mat-cell *matCellDef="let s">

      {{s.percentInPortfolio | percent:'1.2'}}
      <mat-progress-bar color="warn" [value]="s.percentInPortfolio * 100"></mat-progress-bar>

    </td>
    <td mat-footer-cell *matFooterCellDef> </td>
  </ng-container>

  <ng-container matColumnDef="volume">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Volume </th>
    <td mat-cell *matCellDef="let s"> {{s.volume |  number}} </td>
    <td mat-footer-cell *matFooterCellDef> </td>
  </ng-container>

  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Price </th>
    <td mat-cell *matCellDef="let s"> {{s.price |  number}} </td>
    <td mat-footer-cell *matFooterCellDef> </td>
  </ng-container>

  <ng-container matColumnDef="cost">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Cost </th>
    <td mat-cell *matCellDef="let s"> {{s.cost| currency:'EUR':'symbol-narrow'}} </td>
    <td mat-footer-cell *matFooterCellDef>{{getTotalCost() | currency:'EUR':'symbol-narrow'}} </td>
  </ng-container>

  <ng-container matColumnDef="value">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Value </th>
    <td mat-cell *matCellDef="let s"> {{s.value | currency:'EUR':'symbol-narrow'}} </td>
    <td mat-footer-cell *matFooterCellDef> {{getTotalValue() | currency:'EUR':'symbol-narrow'}}</td>
  </ng-container>

  <ng-container matColumnDef="lastPrice">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Price </th>
    <td mat-cell *matCellDef="let s"> {{s.symbol.lastPrice}} </td>
    <td mat-footer-cell *matFooterCellDef> </td>
  </ng-container>


  <ng-container matColumnDef="variation">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Variation</th>
    <td mat-cell class="mediumbold" *matCellDef="let s" [ngStyle]="{'background-color': s.percentVariation>0?  '#dcfce2' : '#fcdcdc'}">
      {{s.value - s.cost | currency:'EUR':'symbol-narrow'}}
      <div class="subline"> {{ s.percentVariation | percent:'1.2'}}</div>
      <mat-progress-bar color="green" [value]=" s.percentVariation * 100"></mat-progress-bar>

    </td>
    <td mat-footer-cell class="centered" *matFooterCellDef [ngStyle]="{'background-color': getTotalVariation()>0?  '#dcfce2' : '#fcdcdc'}">
      {{getTotalValue()-getTotalCost()| currency:'EUR':'symbol-narrow'}} |
      <span class="subline">{{ getTotalVariation() | percent:'1.2'}}</span>
    </td>
  </ng-container>

  <ng-container matColumnDef="%">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> %</th>
    <td mat-cell class="mediumbold" *matCellDef="let s" [ngStyle]="{'background-color': s.percentVariation>0? '#dcfce2' : '#fcdcdc'}"> {{s.percentVariation | percent:'1.2'}} </td>
    <td mat-footer-cell *matFooterCellDef [ngStyle]="{'background-color': getTotalVariation()>0?  '#dcfce2' : '#fcdcdc'}">
      {{ getTotalVariation() | percent:'1.2'}}</td>
  </ng-container>

  <ng-container class="centered" matColumnDef="updated">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Update </th>
    <td [ngStyle]="{'background-color': isUpdated(s.symbol.lastDate)? '#dcfce2' : '#fcdcdc'}" mat-cell *matCellDef="let s">
      {{s.symbol.lastDate}}
    </td>
    <td mat-footer-cell *matFooterCellDef>
      {{today() | date}}
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
</table>